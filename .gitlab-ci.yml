default:
  tags:
    - bachelor
  image: registry.gitlab.com/hitchhikers/container-images/python-quality:latest

stages:
  - test
  - release

ui_pipeline:
  stage: test
  trigger:
    include:
      - local: ui/ui-pipeline.yml
  rules:
    - if: $CI_MERGE_REQUEST_ID
      changes:
        - ui/*

core_pipeline:
  stage: test
  trigger:
    include:
      - local: core/core-pipeline.yml
  rules:
    - if: $CI_MERGE_REQUEST_ID
      changes:
        - core/*

# Publish new releases/tags when applicable from the commits
release:
  stage: release
  script:
    - semantic-release
  only:
    - master
